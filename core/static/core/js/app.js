// --- Simple JS i18n for homepage and dashboard ---
const translations = {
	en: {
		'get_started': 'Get Started with Your Account',
		'secure_access': 'Securely access your account or create a new one to start banking with confidence.',
		'sign_in': 'Sign In',
		'register': 'Register',
		'select_language': 'Select Language',
		'dashboard': 'Dashboard',
		'accounts': 'Accounts',
		'transfers': 'Transfers',
		'cards': 'Cards',
		'transactions': 'Transactions',
		'security': 'Security',
		'settings': 'Settings',
		'available_balance': 'Available Balance',
		'send_money': 'Send Money',
		'receive_money': 'Receive Money',
		'no_profile': 'No profile found',
		'transactions_title': 'Transactions',
		'search': 'Search...',
		'no_transactions': 'No transactions yet.',
		'send_money_title': 'Send Money',
		'recipient_account': 'Recipient Account',
		'amount': 'Amount ($)',
		'description': 'Description',
		'transfer_pin': 'Transfer PIN',
		'cancel': 'Cancel',
		'send': 'Send',
		'transfer_success': 'Transfer successful!',
		'complete_kyc': 'Complete KYC',
		'increase_limits': 'Increase your transfer limits.',
		'verify_now': 'Verify Now',
	},
	fr: {
		'get_started': 'Commencez avec votre compte',
		'secure_access': 'Accédez à votre compte ou créez-en un nouveau en toute sécurité.',
		'sign_in': 'Se connecter',
		'register': 'S’inscrire',
		'select_language': 'Choisir la langue',
		'dashboard': 'Tableau de bord',
		'accounts': 'Comptes',
		'transfers': 'Transferts',
		'cards': 'Cartes',
		'transactions': 'Transactions',
		'security': 'Sécurité',
		'settings': 'Paramètres',
		'available_balance': 'Solde disponible',
		'send_money': 'Envoyer de l’argent',
		'receive_money': 'Recevoir de l’argent',
		'no_profile': 'Aucun profil trouvé',
		'transactions_title': 'Transactions',
		'search': 'Recherche...',
		'no_transactions': 'Aucune transaction.',
		'send_money_title': 'Envoyer de l’argent',
		'recipient_account': 'Compte du destinataire',
		'amount': 'Montant (€)',
		'description': 'Description',
		'transfer_pin': 'Code de transfert',
		'cancel': 'Annuler',
		'send': 'Envoyer',
		'transfer_success': 'Transfert réussi !',
		'complete_kyc': 'Compléter la vérification',
		'increase_limits': 'Augmentez vos limites de transfert.',
		'verify_now': 'Vérifier maintenant',
	},
	es: {
		'get_started': 'Comience con su cuenta',
		'secure_access': 'Acceda a su cuenta o cree una nueva de forma segura.',
		'sign_in': 'Iniciar sesión',
		'register': 'Registrarse',
		'select_language': 'Seleccionar idioma',
		'dashboard': 'Panel',
		'accounts': 'Cuentas',
		'transfers': 'Transferencias',
		'cards': 'Tarjetas',
		'transactions': 'Transacciones',
		'security': 'Seguridad',
		'settings': 'Configuraciones',
		'available_balance': 'Saldo disponible',
		'send_money': 'Enviar dinero',
		'receive_money': 'Recibir dinero',
		'no_profile': 'No se encontró perfil',
		'transactions_title': 'Transacciones',
		'search': 'Buscar...',
		'no_transactions': 'Sin transacciones.',
		'send_money_title': 'Enviar dinero',
		'recipient_account': 'Cuenta del destinatario',
		'amount': 'Cantidad ($)',
		'description': 'Descripción',
		'transfer_pin': 'PIN de transferencia',
		'cancel': 'Cancelar',
		'send': 'Enviar',
		'transfer_success': '¡Transferencia exitosa!',
		'complete_kyc': 'Completar KYC',
		'increase_limits': 'Aumente sus límites de transferencia.',
		'verify_now': 'Verificar ahora',
	},
	de: {
		'get_started': 'Starten Sie mit Ihrem Konto',
		'secure_access': 'Greifen Sie sicher auf Ihr Konto zu oder erstellen Sie ein neues.',
		'sign_in': 'Anmelden',
		'register': 'Registrieren',
		'select_language': 'Sprache wählen',
		'dashboard': 'Dashboard',
		'accounts': 'Konten',
		'transfers': 'Überweisungen',
		'cards': 'Karten',
		'transactions': 'Transaktionen',
		'security': 'Sicherheit',
		'settings': 'Einstellungen',
		'available_balance': 'Verfügbares Guthaben',
		'send_money': 'Geld senden',
		'receive_money': 'Geld empfangen',
		'no_profile': 'Kein Profil gefunden',
		'transactions_title': 'Transaktionen',
		'search': 'Suchen...',
		'no_transactions': 'Keine Transaktionen.',
		'send_money_title': 'Geld senden',
		'recipient_account': 'Empfängerkonto',
		'amount': 'Betrag (€)',
		'description': 'Beschreibung',
		'transfer_pin': 'Überweisungscode',
		'cancel': 'Abbrechen',
		'send': 'Senden',
		'transfer_success': 'Überweisung erfolgreich!',
		'complete_kyc': 'KYC abschließen',
		'increase_limits': 'Erhöhen Sie Ihre Überweisungslimits.',
		'verify_now': 'Jetzt verifizieren',
	},
	ar: {
		'get_started': 'ابدأ مع حسابك',
		'secure_access': 'قم بالوصول إلى حسابك أو أنشئ حسابًا جديدًا بأمان.',
		'sign_in': 'تسجيل الدخول',
		'register': 'إنشاء حساب',
		'select_language': 'اختر اللغة',
		'dashboard': 'لوحة التحكم',
		'accounts': 'الحسابات',
		'transfers': 'التحويلات',
		'cards': 'البطاقات',
		'transactions': 'المعاملات',
		'security': 'الأمان',
		'settings': 'الإعدادات',
		'available_balance': 'الرصيد المتاح',
		'send_money': 'إرسال المال',
		'receive_money': 'استلام المال',
		'no_profile': 'لم يتم العثور على ملف',
		'transactions_title': 'المعاملات',
		'search': 'بحث...',
		'no_transactions': 'لا توجد معاملات.',
		'send_money_title': 'إرسال المال',
		'recipient_account': 'حساب المستلم',
		'amount': 'المبلغ ($)',
		'description': 'الوصف',
		'transfer_pin': 'رمز التحويل',
		'cancel': 'إلغاء',
		'send': 'إرسال',
		'transfer_success': 'تم التحويل بنجاح!',
		'complete_kyc': 'إكمال التحقق',
		'increase_limits': 'قم بزيادة حدود التحويل الخاصة بك.',
		'verify_now': 'تحقق الآن',
	},
};

function setLanguage(lang) {
	if (!translations[lang]) return;
	document.querySelectorAll('[data-i18n]').forEach(el => {
		const key = el.getAttribute('data-i18n');
		if (translations[lang][key]) {
			el.textContent = translations[lang][key];
		}
	});
	// Optionally, store language in localStorage
	localStorage.setItem('lang', lang);
}

// On page load, set language from localStorage or default
document.addEventListener('DOMContentLoaded', function() {
	let lang = localStorage.getItem('lang') || 'en';
	setLanguage(lang);
	// Attach to flag buttons if present
	document.querySelectorAll('.flag-btn').forEach(btn => {
		btn.addEventListener('click', function(e) {
			e.preventDefault();
			const lang = btn.value || btn.getAttribute('data-lang') || btn.dataset.lang;
			setLanguage(lang);
		});
	});
});
// --- End JS i18n ---

// --- Dashboard Sidebar Toggle & Outside Click ---
function toggleSidebar() {
  const sidebar = document.getElementById('sidebar');
  if (sidebar.classList.contains('-translate-x-full')) {
    sidebar.classList.remove('-translate-x-full');
    document.body.classList.add('sidebar-open');
  } else {
    sidebar.classList.add('-translate-x-full');
    document.body.classList.remove('sidebar-open');
  }
}

function closeSidebarOnMobile() {
  const sidebar = document.getElementById('sidebar');
  if (window.innerWidth < 768) {
    sidebar.classList.add('-translate-x-full');
    document.body.classList.remove('sidebar-open');
  }
}

document.addEventListener('click', function(event) {
  const sidebar = document.getElementById('sidebar');
  if (!sidebar) return;
  if (window.innerWidth >= 768) return;
  if (!sidebar.classList.contains('-translate-x-full')) {
    // Sidebar is open
    if (!sidebar.contains(event.target) && !event.target.closest('button[onclick*="toggleSidebar"]')) {
      sidebar.classList.add('-translate-x-full');
      document.body.classList.remove('sidebar-open');
    }
  }
});
// --- End Dashboard Sidebar Toggle ---